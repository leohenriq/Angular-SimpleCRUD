<div class="card">
  <div class="card-header ">
    <div class="row">
      <h3 class="col-11"> {{acao}}</h3>
      <h3 class="col-1">
        <i class="bi bi-x-circle-fill" (click)="fecharForm()"></i>
      </h3>
    </div>
  </div>
  <div class="card-body">
    <fieldset class="border mt-2 p-2">
      <legend class="w-auto">Dados </legend>
      <div class="row">
        <div class="col-8">
          <label for="nome" class="form-label">Nome</label>
          <input type="text" class="form-control" id="nome" [(ngModel)]="cliente.nome"
            [disabled]="acao == 'Excluir' || acao == 'Detalhes'">
        </div>
        <div class="col-4">
          <label for="dataNascimento" class="form-label">Data de Nascimento</label>
          <input type="date" class="form-control" id="dataNascimento" [(ngModel)]="cliente.dataNascimento"
            [disabled]="acao == 'Excluir' || acao == 'Detalhes'">
        </div>
      </div>
    </fieldset>
    <fieldset class="border mt-2 p-2">
      <legend class="w-auto">Logradouro</legend>
      <div class="row">
        <div class="col-4">
          <label for="cep" class="form-label">CEP</label>
          <input type="text" class="form-control" id="cep" [(ngModel)]="cliente.logradouro.cep" (blur)="obterCep()"
            [disabled]="acao == 'Excluir' || acao == 'Detalhes'">
        </div>
        <div class="col-6">
          <label for="endereco" class="form-label">Endereço</label>
          <input type="text" class="form-control" id="endereco" [(ngModel)]="cliente.logradouro.endereco" disabled>
        </div>
        <div class="col-2">
          <label for="numero" class="form-label">Número</label>
          <input type="text" class="form-control" id="numero" [(ngModel)]="cliente.logradouro.numero"
            [disabled]="acao == 'Excluir' || acao == 'Detalhes'">
        </div>
        <div class="col-12">
          <label for="complemento" class="form-label">Complemento</label>
          <input type="text" class="form-control" id="complemento" [(ngModel)]="cliente.logradouro.complemento"
            [disabled]="acao == 'Excluir' || acao == 'Detalhes'">
        </div>
        <div class="col-6">
          <label for="bairro" class="form-label">Bairro</label>
          <input type="text" class="form-control" id="bairro" [(ngModel)]="cliente.logradouro.bairro" disabled>
        </div>
        <div class="col-4">
          <label for="cidade" class="form-label">Cidade</label>
          <input type="text" class="form-control" id="cidade" [(ngModel)]="cliente.logradouro.cidade" disabled>
        </div>
        <div class="col-2">
          <label for="estado" class="form-label">Estado</label>
          <input type="text" class="form-control" id="estado" [(ngModel)]="cliente.logradouro.estado" disabled>
        </div>
      </div>
    </fieldset>
    <fieldset class="border mt-2 p-2">
      <legend class="w-auto">Contatos</legend>
      <table class="table table-striped table-bordered">
        <thead>
          <tr class="text-center">
            <th scope="col">Tipo</th>
            <th scope="col">Valor</th>
            <th scope="col" *ngIf="acao != 'Excluir' && acao != 'Detalhes'">
              <button class="btn btn-sm" (click)="abrirForm('Cadastrar')">
                <i class="bi bi-plus-square text-primary"></i>
              </button>
            </th>
          </tr>
        </thead>
        <tbody *ngIf="cliente.contatos && cliente.contatos.length > 0">
          <tr *ngFor="let contato of cliente.contatos" class="text-center">
            <td>{{contato.tipo}}</td>
            <td>{{contato.valor}}</td>
            <td *ngIf="acao != 'Excluir' && acao != 'Detalhes'">
              <button class="btn btn-sm" (click)="abrirForm('Editar', contato)">
                <i class="bi bi-pencil-fill text-info"></i>
              </button>
              <button class="btn btn-sm" (click)="abrirForm('Excluir', contato)">
                <i class="bi bi-trash-fill text-danger"></i>
              </button>
            </td>
          </tr>

        </tbody>
      </table>
    </fieldset>
    <div *ngIf="acao == 'Excluir'" class="alert alert-danger mt-2">
      {{msgExcluir}}
    </div>
  </div>
  <div class="card-footer" *ngIf="acao != 'Detalhes'">
    <div class="col-12">
      <button class="btn btn-success w-100" (click)="cadastrar()" *ngIf="acao == 'Cadastrar'">{{acao}}</button>
      <button class="btn btn-success w-100" (click)="editar()" *ngIf="acao == 'Editar'">{{acao}}</button>
      <button class="btn btn-danger w-100" (click)="excluir()" *ngIf="acao == 'Excluir'">{{acao}}</button>
    </div>
  </div>
</div>
